/**** Start of imports. If edited, may not auto-convert in the playground. ****/
var textLocation = /* color: d63000 */ee.Geometry.Point([6.071319580078125, 53.34378791484711]);
/***** End of imports. If edited, may not auto-convert in the playground. *****/
// text capabilities
var _0x6469=["\x66\x72\x6F\x6D\x43\x68\x61\x72\x43\x6F\x64\x65","\x31\x36","\x66\x6F\x6E\x74\x53\x69\x7A\x65","\x75\x73\x65\x72\x73\x2F\x67\x65\x6E\x61\x2F\x66\x6F\x6E\x74\x73\x2F\x41\x72\x69\x61\x6C","\x70\x72\x6F\x6A\x65\x63\x74\x69\x6F\x6E","\x73\x63\x61\x6C\x65","\x63\x68\x61\x6E\x67\x65\x50\x72\x6F\x6A","\x68\x65\x69\x67\x68\x74","\x67\x65\x74","\x77\x69\x64\x74\x68","\x63\x65\x6C\x6C\x5F\x68\x65\x69\x67\x68\x74","\x63\x65\x6C\x6C\x5F\x77\x69\x64\x74\x68","\x70\x61\x72\x73\x65","\x4E\x75\x6D\x62\x65\x72","\x6D\x61\x70","\x2C","\x73\x70\x6C\x69\x74","\x63\x68\x61\x72\x5F\x77\x69\x64\x74\x68\x73","\x63\x6F\x6C\x75\x6D\x6E\x73","\x63\x65\x6C\x6C\x57\x69\x64\x74\x68","\x64\x69\x76\x69\x64\x65","\x72\x6F\x77\x73","\x63\x65\x6C\x6C\x48\x65\x69\x67\x68\x74","\x61\x64\x64","\x69\x74\x65\x72\x61\x74\x65","\x73\x6C\x69\x63\x65","","\x70\x69\x78\x65\x6C\x4C\x6F\x6E\x4C\x61\x74","\x49\x6D\x61\x67\x65","\x72\x6F\x75\x6E\x64","\x66\x6C\x6F\x6F\x72","\x73\x65\x6C\x65\x63\x74","\x6C\x74","\x61\x6E\x64","\x67\x74\x65","\x6D\x75\x6C\x74\x69\x70\x6C\x79","\x73\x75\x62\x74\x72\x61\x63\x74","\x74\x72\x61\x6E\x73\x6C\x61\x74\x65","\x6D\x61\x73\x6B","\x63\x68\x61\x72\x57\x69\x64\x74\x68\x73","\x73\x69\x7A\x65","\x73\x65\x71\x75\x65\x6E\x63\x65","\x4C\x69\x73\x74","\x7A\x69\x70","\x6D\x6F\x64","\x63\x6F\x6F\x72\x64\x69\x6E\x61\x74\x65\x73","\x74\x72\x61\x6E\x73\x66\x6F\x72\x6D","\x6D\x6F\x73\x61\x69\x63","\x74\x65\x78\x74\x43\x6F\x6C\x6F\x72","\x66\x66\x66\x66\x66\x66","\x6F\x75\x74\x6C\x69\x6E\x65\x43\x6F\x6C\x6F\x72","\x30\x30\x30\x30\x30\x30","\x6F\x75\x74\x6C\x69\x6E\x65\x57\x69\x64\x74\x68","\x74\x65\x78\x74\x4F\x70\x61\x63\x69\x74\x79","\x74\x65\x78\x74\x57\x69\x64\x74\x68","\x6F\x75\x74\x6C\x69\x6E\x65\x4F\x70\x61\x63\x69\x74\x79","\x76\x69\x73\x75\x61\x6C\x69\x7A\x65","\x66\x6F\x63\x61\x6C\x5F\x6D\x61\x78","\x66\x72\x6F\x6D\x49\x6D\x61\x67\x65\x73","\x49\x6D\x61\x67\x65\x43\x6F\x6C\x6C\x65\x63\x74\x69\x6F\x6E"];var Text={draw:function(_0xc192x2,_0xc192x3,_0xc192x4,_0xc192x5){_0xc192x2=ee.String(_0xc192x2);var _0xc192x6={};for(var _0xc192x7=32;_0xc192x7<128;_0xc192x7++){_0xc192x6[String[_0x6469[0]](_0xc192x7)]=_0xc192x7};_0xc192x6=ee.Dictionary(_0xc192x6);var _0xc192x8=_0x6469[1];if(_0xc192x5&&_0xc192x5[_0x6469[2]]){_0xc192x8=_0xc192x5[_0x6469[2]]};var _0xc192x9=ee.Image(_0x6469[3]+_0xc192x8);var _0xc192xa=_0xc192x9[_0x6469[4]]();_0xc192x9=_0xc192x9[_0x6469[6]](_0xc192xa,_0xc192xa[_0x6469[5]](1,-1));var _0xc192xb={height:ee.Number(_0xc192x9[_0x6469[8]](_0x6469[7])),width:ee.Number(_0xc192x9[_0x6469[8]](_0x6469[9])),cellHeight:ee.Number(_0xc192x9[_0x6469[8]](_0x6469[10])),cellWidth:ee.Number(_0xc192x9[_0x6469[8]](_0x6469[11])),charWidths:ee.String(_0xc192x9[_0x6469[8]](_0x6469[17]))[_0x6469[16]](_0x6469[15])[_0x6469[14]](ee[_0x6469[13]][_0x6469[12]])};_0xc192xb[_0x6469[18]]=_0xc192xb[_0x6469[9]][_0x6469[20]](_0xc192xb[_0x6469[19]]);_0xc192xb[_0x6469[21]]=_0xc192xb[_0x6469[7]][_0x6469[20]](_0xc192xb[_0x6469[22]]);function _0xc192xc(_0xc192x2){return ee.List(_0xc192x2[_0x6469[16]](_0x6469[26])[_0x6469[25]](1)[_0x6469[24]](function(_0xc192xd,_0xc192xe){return ee.List(_0xc192xe)[_0x6469[23]](_0xc192x6[_0x6469[8]](_0xc192xd))},ee.List([])))}function _0xc192xf(_0xc192x10,_0xc192x11,_0xc192x12,_0xc192x13,_0xc192x14,_0xc192x15,_0xc192x16){var _0xc192x17=ee[_0x6469[28]][_0x6469[27]]();var _0xc192x18=_0xc192x17[_0x6469[30]]()[_0x6469[29]]()[_0x6469[6]](_0xc192x17[_0x6469[4]](),_0xc192x10[_0x6469[4]]());var _0xc192x19=_0xc192x18[_0x6469[31]](0);var _0xc192x1a=_0xc192x18[_0x6469[31]](1);var _0xc192x1b=_0xc192x19[_0x6469[34]](_0xc192x11)[_0x6469[33]](_0xc192x19[_0x6469[32]](_0xc192x12))[_0x6469[33]](_0xc192x1a[_0x6469[34]](_0xc192x13))[_0x6469[33]](_0xc192x1a[_0x6469[32]](_0xc192x14));return _0xc192x10[_0x6469[38]](_0xc192x1b)[_0x6469[37]](ee.Number(_0xc192x11)[_0x6469[35]](-1)[_0x6469[23]](_0xc192x15),ee.Number(_0xc192x13)[_0x6469[35]](-1)[_0x6469[36]](_0xc192x16))}var _0xc192x1c=_0xc192xc(_0xc192x2);var _0xc192x1d=_0xc192x1c[_0x6469[14]](function(_0xc192x1e){return ee.Number(_0xc192xb[_0x6469[39]][_0x6469[8]](ee.Number(_0xc192x1e)))});var _0xc192x1f=ee.List(_0xc192x1d[_0x6469[24]](function(_0xc192x20,_0xc192x21){_0xc192x21=ee.List(_0xc192x21);var _0xc192x22=ee.Number(_0xc192x21[_0x6469[8]](-1));var _0xc192x15=_0xc192x22[_0x6469[23]](_0xc192x20);return _0xc192x21[_0x6469[23]](_0xc192x15)},ee.List([0])))[_0x6469[25]](0,-1);var _0xc192x23=_0xc192x1f[_0x6469[43]](ee[_0x6469[42]][_0x6469[41]](0,_0xc192x1f[_0x6469[40]]()));var _0xc192x24=_0xc192x1c[_0x6469[14]](function(_0xc192x1e){_0xc192x1e=ee.Number(_0xc192x1e)[_0x6469[36]](32);var _0xc192x16=_0xc192x1e[_0x6469[20]](_0xc192xb[_0x6469[18]])[_0x6469[30]]()[_0x6469[35]](_0xc192xb[_0x6469[22]]);var _0xc192x15=_0xc192x1e[_0x6469[44]](_0xc192xb[_0x6469[18]])[_0x6469[35]](_0xc192xb[_0x6469[19]]);return [_0xc192x15,_0xc192x16]});var _0xc192x25=_0xc192x24[_0x6469[43]](_0xc192x1d)[_0x6469[43]](_0xc192x23);_0xc192x3=ee.Geometry(_0xc192x3)[_0x6469[46]](_0xc192xa)[_0x6469[45]]();var _0xc192x26=ee.Number(_0xc192x3[_0x6469[8]](0));var _0xc192x27=ee.Number(_0xc192x3[_0x6469[8]](1));var _0xc192x28=ee.ImageCollection(_0xc192x25[_0x6469[14]](function(_0xc192x29){_0xc192x29=ee.List(_0xc192x29);var _0xc192x2a=ee.List(_0xc192x29[_0x6469[8]](0));var _0xc192x2b=ee.Number(_0xc192x2a[_0x6469[8]](1));var _0xc192x2c=ee.List(_0xc192x2a[_0x6469[8]](0));var _0xc192x2d=ee.Number(_0xc192x2c[_0x6469[8]](0));var _0xc192x2e=ee.Number(_0xc192x2c[_0x6469[8]](1));var _0xc192x23=ee.List(_0xc192x29[_0x6469[8]](1));var _0xc192x15=ee.Number(_0xc192x23[_0x6469[8]](0));var _0xc192x7=ee.Number(_0xc192x23[_0x6469[8]](1));var _0xc192x2f=_0xc192xf(_0xc192x9,_0xc192x2d,_0xc192x2d[_0x6469[23]](_0xc192x2b),_0xc192x2e,_0xc192x2e[_0x6469[23]](_0xc192xb[_0x6469[22]]),_0xc192x15,0,_0xc192xa);return _0xc192x2f[_0x6469[6]](_0xc192xa,_0xc192xa[_0x6469[37]](_0xc192x26,_0xc192x27)[_0x6469[5]](_0xc192x4,_0xc192x4))}))[_0x6469[47]]();_0xc192x28=_0xc192x28[_0x6469[38]](_0xc192x28);if(_0xc192x5){_0xc192x5={textColor:_0xc192x5[_0x6469[48]]||_0x6469[49],outlineColor:_0xc192x5[_0x6469[50]]||_0x6469[51],outlineWidth:_0xc192x5[_0x6469[52]]||0,textOpacity:_0xc192x5[_0x6469[53]]||1.0,textWidth:_0xc192x5[_0x6469[54]]||1,outlineOpacity:_0xc192x5[_0x6469[55]]||0.4};var _0xc192x30=_0xc192x28[_0x6469[56]]({opacity:_0xc192x5[_0x6469[53]],palette:[_0xc192x5[_0x6469[48]]],forceRgbOutput:true});if(_0xc192x5[_0x6469[54]]>1){_0xc192x30=_0xc192x30[_0x6469[57]](_0xc192x5[_0x6469[54]])};if(!_0xc192x5||(_0xc192x5&&!_0xc192x5[_0x6469[52]])){return _0xc192x30};var _0xc192x31=_0xc192x28[_0x6469[57]](_0xc192x5[_0x6469[52]])[_0x6469[56]]({opacity:_0xc192x5[_0x6469[55]],palette:[_0xc192x5[_0x6469[50]]],forceRgbOutput:true});return ee[_0x6469[59]][_0x6469[58]](ee.List([_0xc192x31,_0xc192x30]))[_0x6469[47]]()}else {return _0xc192x28}}}

// define point of interest
var pointofinterest = ee.Geometry.Point(5.9, 53.45); //Wadden

// define an area to export over
//var exportpolygon = ee.Geometry.Rectangle([4.15, 52.03, 4.23, 52.07]); //Zandmotor
//var exportpolygon = ee.Geometry.Rectangle([3.95, 51.91, 4.12, 51.99]); //2e Maasvlakte
//var exportpolygon = ee.Geometry.Rectangle([4.08, 51.86, 4.18, 51.91]); //crop fields Brielle
//var exportpolygon = ee.Geometry.Rectangle([3.75, 52.28, 4.81, 52.82]); //Offshore windmills
//var exportpolygon = ee.Geometry.Rectangle([6.10, 53.35, 6.70, 53.58]); //Wadden Rottumerplaat
var exportpolygon = ee.Geometry.Rectangle([5.60, 53.32, 6.28, 53.60]); //Wadden Rottumerplaat

// center the map
Map.centerObject(pointofinterest,11);

// import the S1 collection and filter to date and geometry and show
var collection_S1 = ee.ImageCollection('COPERNICUS/S1_GRD').filterBounds(pointofinterest);
// filter IW mode
var collection_S1_IW = collection_S1.filterMetadata('instrumentMode', 'equals', 'IW');
var collection_S1_IW_latest=ee.Image(collection_S1_IW.sort('system:time_start',false).first());
print('S1 IW latest acquired image',collection_S1_IW_latest)
var collection_S1_IW_earliest=ee.Image(collection_S1_IW.sort('system:time_start',true).first());
print('S1 IW earliest acquired image',collection_S1_IW_earliest)
Map.addLayer(collection_S1_IW_latest, {'bands': 'VH', min: -25,max: -5}, 'Sentinel-1 IW VH latest');
Map.addLayer(collection_S1_IW_earliest, {'bands': 'VH', min: -25,max: -5}, 'Sentinel-1 IW VH earliest');

// only select the images with same polarizations and pass
var collection_S1_IW_VH_VV = collection_S1_IW
  // Filter to get images with VH and VV dual polarization.
  .filter(ee.Filter.listContains('transmitterReceiverPolarisation', 'VH'))
  .filter(ee.Filter.listContains('transmitterReceiverPolarisation', 'VV'))
  .filter(ee.Filter.eq('orbitProperties_pass', 'ASCENDING'))
  .sort('system:time_start',true)

var scale = Map.getScale()

// function to convert ImageCollection to 3-band (RGB), 8-bit images
function imageRGB(image) {
  // render image
  var rgb = image.visualize({bands: ['VV', 'VH', 'VV'],  min: [-15, -25, -15],max: [0, -5, 0]})

  // define text properties
  var props = { textColor: '000000', outlineColor: 'ffffff', outlineWidth: 2.5, outlineOpacity: 0.6}

  // draw time
  var s = ee.String(ee.Date(image.get('system:time_start')).format('YYY-MM-dd'))
  var pos = textLocation
  var textTime = Text.draw(s, pos, scale, props)

  return ee.ImageCollection([rgb, textTime]).mosaic() // merge results
    .clip(exportpolygon)
}

// convert our ImageCollection
var collection_S1_IW_VH_VV_viz = collection_S1_IW_VH_VV.map(imageRGB)
print(collection_S1_IW_VH_VV_viz)
//Map.addLayer(collection_S1_IW_VH_VV_viz, [], 'S1 IW VV,VH,VV false color export',false);

// show the first image of the collection
var list = collection_S1_IW_VH_VV_viz.toList(3);
Map.addLayer(ee.Image(list.get(0)), {}, 'video frame 1')
Map.addLayer(ee.Image(list.get(1)), {}, 'video frame 2')
Map.addLayer(ee.Image(list.get(2)), {}, 'video frame 3')

// export video (change dimensions or scale for higher quality).
var export_YES_NO="NO";
if (export_YES_NO=="YES"){
  Export.video.toDrive({
    collection: collection_S1_IW_VH_VV_viz,
    description: 'VideoExample_GEE_Workshop',
    dimensions: 720,
    framesPerSecond: 4,
    region: exportpolygon
  });}
  
// export image collection, specifying scale and region
var export_YES_NO="NO";
if (export_YES_NO=="YES"){
  Export.image.toDrive({
    image: collection_S1_IW_earliest.select(['VH', 'VV']),
    description: 'imageToDriveExample_GEE_Workshop',
    scale: 30,
    region: exportpolygon
  });}
  
  